!function(a,b,c,d,e,f,g,h){function i(){if(void 0===a.bom.settings.cookieName||null===a.bom.settings.cookieName)return null;var b="; "+document.cookie,c=b.split("; "+a.bom.settings.cookieName+"=");return 2==c.length?c.pop().split(";").shift():null}function j(b,c){if(void 0!==a.bom.settings.cookieName&&null!==a.bom.settings.cookieName){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3),document.cookie=a.bom.settings.cookieName+"="+b+"; expires="+d.toUTCString()}}function k(b,c,d,e){d=d||l,e=e||m;var f=new XMLHttpRequest;if(!("withCredentials"in f))throw"XMLHttpRequest not supported";return f.open(b,c),null!==i()&&f.setRequestHeader("Authorization",i()),null!==a.bom.settings.culture&&""!==a.bom.settings.culture&&f.setRequestHeader("Accept-Language",a.bom.settings.culture),f.responseType="json",f.setRequestHeader("Accept","application/json"),f.onload=function(){return d("string"==typeof this.response?JSON.parse(this.response):this.response,this.status)},f.onerror=function(){return console.error('request to "'+c+'" has failed'),e()},f.send()}function l(a,b){return console.log(a,b)}function m(){return console.error("a networkerror has occured")}function n(a,b,c,d){var e=void 0!=window.screenLeft?window.screenLeft:screen.left,f=void 0!=window.screenTop?window.screenTop:screen.top,g=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,h=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,i=g/2-c/2+e,j=h/2-d/2+f,k=window.open(a,b,"scrollbars=yes, width="+c+", height="+d+", top="+j+", left="+i);window.focus&&k.focus()}function o(b,c,d,e){return k("GET",a.bom.settings.url+"/api/m/"+b+(c||""),d,e)}function p(b,c,d){return void 0===b||null===b?d?d():m():k("GET",a.bom.settings.url+"/api/i/?i="+encodeURIComponent(b),c,d)}function q(b,c){return null===i()?c?c():m():k("GET",a.bom.settings.url+"/api/profile",b,c)}function r(a,b){var c=this;return"object"==typeof a&&(c=a),"string"==typeof a&&void 0!==C.keys[a]&&void 0!==b&&null!==b&&(c[a]=b),{get:function(){var a="";for(var b in c)""!==a&&(a+="&"),a+=C.keys[b]+"="+encodeURIComponent(c[b]);return""!==a?"?"+a:""},set:function(a,b){return r.call(c,a,b)}}}function s(){a.bom.settings.btnLogin.innerHTML=a.bom.settings.textLogin,a.bom.settings.btnLogin.addEventListener(J,E.login)}function t(){a.bom.settings.btnLogin.innerHTML=a.bom.settings.textLogout,a.bom.settings.btnLogin.addEventListener(J,E.logout)}function u(a,b){return 200===b?t():s()}function v(){return s()}function w(){n(F.urlLogin,"BOM - Login",302,320),H(I,x,!1)}function x(b){b.origin===a.bom.settings.url&&(j(b.data),location.reload(!0))}function y(){return k("GET",F.urlLogout,z,A)}function z(){return j(void 0,-1),location.reload(!0)}function A(){return console.error("An error has occured")}if(void 0===a||null===a)return void console.error("bom framework could not be initialized");void 0!==a.bom&&null!==a.bom||(a.bom={}),void 0!==a.bom.settings&&null!==a.bom.settings||(a.bom.settings={url:b,culture:c||null,cookieName:d,appId:e,btnLogin:document.getElementById(f),textLogin:g,textLogout:h});var B={module:o,item:p,user:q},C={set:function(a,b){return r.call({},a,b)},keys:{tag:"ft",search:"fs",sorter:"so",skip:"sk",take:"ta"}},D={abos:"abos",events:"events",news:"news"},E={login:w,logout:y},F={urlLogin:a.bom.settings.url+"/?token="+encodeURIComponent(a.bom.settings.appId)+"&origin="+window.location.origin+"&domain="+window.location.href,urlLogout:a.bom.settings.url+"/api/logout",urlProfile:a.bom.settings.url+"/api/profile"};void 0!==a.bom.get&&null!==a.bom.get||(a.bom.get=B),void 0!==a.bom.options&&null!==a.bom.options||(a.bom.options=C),void 0!==a.bom.modules&&null!==a.bom.modules||(a.bom.modules=D),void 0!==a.bom.authentication&&null!==a.bom.authentication||(a.bom.authentication=E);var G=window.addEventListener?"addEventListener":"attachEvent",H=window[G],I="attachEvent"==G?"onmessage":"message",J="attachEvent"==G?"onclick":"click";null!=a.bom.settings.btnLogin&&k("GET",F.urlProfile,u,v)}
(window,"https://api_kinderkultur.crmforyou.ch","de-CH","bom-auth-cookie","PAtLYZXHx78D6lVL4I2IImMycz85Y+gxY4GVp7iINqM=","","","");
